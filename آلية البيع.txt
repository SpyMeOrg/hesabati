# آلية البيع والتفعيل

## هوية المشروع
1. اسم المشروع:
   - بالعربية: حساباتي أونلاين
   - بالإنجليزية: Hesabaty Online
   - النطاق: hesabaty-online.com

2. النطاقات الفرعية:
   - الموقع الرئيسي: www.hesabaty-online.com
   - منصة العملاء: app.hesabaty-online.com
   - لوحة التحكم: admin.hesabaty-online.com

3. البريد الإلكتروني:
   - المعلومات العامة: info@hesabaty-online.com
   - الدعم الفني: support@hesabaty-online.com
   - المبيعات: sales@hesabaty-online.com

4. وصف المشروع:
   برنامج متكامل مصمم لتسهيل إدارة الحسابات والمخازن لأصحاب المحلات والمحاسبين، يوفر:
   - متابعة شاملة للمبيعات والمصروفات
   - إدارة الديون والمستحقات
   - مراقبة المخزون وحركة البضائع
   - تقارير تفصيلية لاتخاذ القرارات

## الصفحات الجديدة المطلوبة
1. صفحة التفعيل الأولى:
   - خانة عرض الكود التعريفي المجمع
   - خانة إدخال مفتاح الترخيص
   - خانة إدخال اسم المحل
   - زر فحص مفتاح الترخيص
   - زر حفظ وبدء الاستخدام

2. صفحة حالة الترخيص:
   - تظهر عند انتهاء الاشتراك
   - عرض تاريخ بداية الاشتراك
   - عرض تاريخ نهاية الاشتراك
   - معلومات التواصل للتجديد
   - زر طلب تجديد مباشر

3. لوحة تحكم المبيعات (للشركة):
   - إدارة التراخيص
   - إضافة عملاء جدد
   - تجديد اشتراكات
   - مراقبة حالة العملاء
   - إيقاف/تفعيل التراخيص

## باقات النظام
1. الباقة الفردية (محلية):
   - مميزات الباقة:
     * تثبيت على جهاز واحد فقط
     * تخزين محلي للبيانات
     * إنشاء مستخدمين للدخول من نفس الجهاز
     * لا يوجد رابط دخول عبر الويب
     * نسخ احتياطي محلي
   
   - قيود الباقة:
     * الدخول من جهاز واحد فقط
     * يتطلب تشغيل الجهاز للوصول للبيانات
     * لا يمكن مزامنة البيانات عبر الإنترنت

2. الباقة السحابية:
   - مميزات الباقة:
     * تثبيت البرنامج على جهاز المدير
     * تخزين سحابي للبيانات
     * رابط دخول فردي عبر الويب
     * إمكانية الدخول من أي مكان
     * مزامنة فورية للبيانات
     * نسخ احتياطي تلقائي

   - مميزات إضافية:
     * إدارة متعددة المستخدمين
     * تقارير متقدمة
     * دعم فني متميز
     * تحديثات مستمرة

## تدفق عملية البيع والتفعيل
1. طلب البرنامج:
   - العميل يتواصل عبر:
     * الهاتف
     * نموذج طلب في اللاندنج بيج
     * الدردشة الحية
   - اختيار نوع الباقة (فردية/سحابية)

2. تحميل وتثبيت البرنامج:
   - توجيه العميل لصفحة التحميل
   - تحميل البرنامج المشفر
   - تثبيت البرنامج على جهاز العميل

3. التفعيل الأولي:
   أ. عند أول تشغيل:
      - عرض صفحة التفعيل
      - عرض الكود التعريفي المجمع
      - خانة إدخال مفتاح الترخيص (معطلة حتى إنشاء المفتاح)
      - خانة إدخال اسم المحل (معطلة حتى التحقق من المفتاح)

   ب. خطوات التفعيل:
      - العميل يرسل الكود التعريفي
      - الشركة تنشئ مفتاح الترخيص
      - العميل يدخل المفتاح
      - التحقق من صحة المفتاح
      - تفعيل خانة اسم المحل
      - حفظ البيانات وبدء الاستخدام

4. الاستخدام اليومي:
   - فتح البرنامج مباشرة على صفحة تسجيل الدخول
   - عدم ظهور صفحة التفعيل مرة أخرى
   - تخصيص عنوان الموقع باسم المحل المدخل

5. إدارة المستخدمين:
   - العميل يدخل كأدمن
   - يستخدم لوحة التحكم الحالية
   - ينشئ مستخدمين جدد
   - يحدد صلاحياتهم
   - يسلمهم رابط الدخول عبر الويب

6. دخول المستخدمين:
   - المستخدمون يدخلون عبر رابط الويب
   - يستخدمون نفس واجهة المشروع الحالي
   - يرون البيانات حسب صلاحياتهم

7. إدارة الاشتراك:
   أ. قبل انتهاء الاشتراك:
      - تنبيه قبل شهر من الانتهاء
      - إشعار عند فتح البرنامج
      - خيار التواصل للتجديد

   ب. عند انتهاء الاشتراك:
      - عرض صفحة حالة الترخيص
      - منع الدخول للنظام
      - عرض معلومات التجديد

## حماية النظام
1. حماية البرنامج:
   - تشفير البرنامج الرئيسي
   - ربط الترخيص بجهاز واحد
   - منع التلاعب في بيانات الترخيص

2. حماية البيانات:
   - ربط البيانات بمعرف المحل
   - تشفير قاعدة البيانات
   - مزامنة آمنة للبيانات

3. حماية الوصول:
   - المستخدمون يدخلون عبر الويب فقط
   - ربط البيانات بالمحل الواحد
   - منع مشاركة البرنامج

## المكتبات والأدوات المطلوبة
- pkg لتشفير البرنامج
- crypto-js للتشفير
- node-machine-id لقراءة معرف الجهاز
- systeminformation لقراءة معلومات النظام
- date-fns للتعامل مع التواريخ
- sqlite3 للتخزين المحلي
- mongodb للتخزين السحابي
- socket.io للمزامنة الفورية
- express للواجهة السحابية
- jsonwebtoken للتحقق من الهوية

## آلية الوصول للنظام
1. الوصول في الباقة الفردية:
   - تثبيت البرنامج على جهاز واحد
   - تخزين البيانات محلياً
   - إنشاء مستخدمين للدخول المحلي
   - لا يتطلب اتصال إنترنت للتشغيل
   - نسخ احتياطي على نفس الجهاز

2. الوصول في الباقة السحابية:
   - تثبيت البرنامج على جهاز المدير
   - الاتصال بالإنترنت إجباري للوصول للبيانات المحدثة
   - تسجيل الدخول مباشرة بعد التفعيل
   - حفظ بيانات الدخول محلياً (مشفرة)

3. الوصول عبر الويب:
   أ. إنشاء رابط الدخول الفردي:
      - يتم إنشاؤه تلقائياً عند تفعيل البرنامج
      - يتكون من:
        * اسم النطاق الرئيسي
        * معرف فريد للمحل (مشفر)
        * مثال: https://domain.com/store/[معرف_المحل_المشفر]
      - يمكن إعادة إنشاء الرابط عند الطلب
      - صلاحية الرابط مرتبطة بصلاحية الترخيص

   ب. خصائص رابط الدخول:
      - رابط فريد لكل محل
      - لا يمكن تخمينه أو الوصول له عشوائياً
      - يحتوي على طبقة حماية إضافية
      - يمكن تعطيله مؤقتاً من لوحة التحكم

   ج. آلية عمل الرابط:
      - التحقق من صلاحية معرف المحل
      - التحقق من حالة الترخيص
      - توجيه المستخدم لصفحة تسجيل الدخول الخاصة بالمحل
      - عرض اسم المحل في الصفحة للتأكيد

4. مزايا الوصول المزدوج:
   - مرونة في الوصول للنظام
   - تأمين البيانات عبر الطريقتين
   - تزامن البيانات في الوقت الفعلي
   - إمكانية العمل من أي مكان 

## صفحات اللاندنج بيج
1. الصفحة الرئيسية:
   - هيدر جذاب مع صور متحركة للبرنامج
   - مميزات البرنامج الرئيسية
   - عرض الباقات والأسعار
   - نموذج طلب تجربة مجانية
   - أزرار التواصل السريع

2. صفحة المميزات:
   - عرض تفصيلي لكل مميزات البرنامج
   - صور وفيديوهات توضيحية
   - مقارنة بين الباقات
   - قصص نجاح العملاء

3. صفحة الأسعار والباقات:
   - عرض الباقات (فردية/سحابية)
   - مقارنة تفصيلية بين الباقات
   - الأسعار والعروض الحالية
   - أزرار الشراء المباشر
   - الأسئلة الشائعة عن الباقات

4. صفحة التحميل:
   - تعليمات التحميل والتثبيت
   - رابط تحميل البرنامج
   - فيديو شرح التثبيت
   - الأسئلة الشائعة عن التثبيت
   - نموذج طلب المساعدة

5. صفحة الدعم:
   - نموذج التواصل
   - الدردشة الحية
   - أرقام الهواتف
   - البريد الإلكتروني
   - الأسئلة الشائعة

6. صفحة تسجيل الدخول:
   - نموذج تسجيل الدخول للعملاء
   - استعادة كلمة المرور
   - الدخول للوحة التحكم

## خطوات التنفيذ التفصيلية
1. إعداد النطاق والبريد الإلكتروني:
   أ. شراء وإعداد النطاق:
      - شراء نطاق .com من Porkbun
      - إعداد سجلات DNS الأساسية
      - تفعيل شهادة SSL المجانية
      - تفعيل حماية Whois Privacy
      - إنشاء النطاقات الفرعية:
        * www للموقع الرئيسي
        * app لمنصة العملاء
        * admin للوحة التحكم

   ب. إعداد خدمة البريد:
      - إنشاء حساب Zoho Mail
      - إضافة سجلات DNS الخاصة بالبريد
      - التحقق من صحة إعدادات البريد
      - إنشاء عناوين البريد الأساسية:
        * support@ للدعم الفني
        * info@ للمعلومات العامة
        * sales@ للمبيعات
      - إعداد توقيع البريد الموحد
      - اختبار إرسال واستقبال البريد

2. تطوير اللاندنج بيج:
   أ. تصميم وتطوير الصفحات:
      - تصميم UI/UX لجميع الصفحات
      - تطوير الواجهات الأمامية
      - ربط نماذج الطلب والتواصل
      - تهيئة SEO للموقع
      - اختبار تجاوب الموقع
      -التوافق التام مع المتصفحات وانواع الاجهزه

   ب. إعداد نظام إدارة المحتوى:
      - لوحة تحكم لتعديل المحتوى
      - إدارة العروض والأسعار
      - تحديث الأسئلة الشائعة
      - إدارة طلبات العملاء

3. تطوير البرنامج الرئيسي:
   أ. تحويل المشروع الحالي:
      - نسخ المشروع الحالي
      - تعديل هيكل البيانات
      - إضافة نظام التراخيص
      - ربط نظام المستخدمين

   ب. تطوير نظام التراخيص:
      - إنشاء مكتبات التشفير
      - تطوير نظام قراءة معرف الجهاز
      - تطوير نظام إنشاء وفحص التراخيص
      - تطوير نظام التحقق المستمر

   ج. تطوير نظام التخزين:
      - إعداد قاعدة البيانات المحلية
      - إعداد قاعدة البيانات السحابية
      - تطوير نظام المزامنة
      - تطوير نظام النسخ الاحتياطي

4. تطوير لوحة تحكم المبيعات:
   أ. واجهة إدارة العملاء:
      - عرض وإدارة العملاء
      - إدارة التراخيص
      - متابعة الاشتراكات
      - إدارة طلبات التجديد

   ب. نظام التقارير:
      - تقارير المبيعات
      - تقارير العملاء النشطين
      - تقارير انتهاء التراخيص
      - تقارير محاولات الاختراق

5. اختبار النظام:
   أ. اختبار البرنامج:
      - اختبار التثبيت والتفعيل
      - اختبار الباقات المختلفة
      - اختبار المزامنة والنسخ الاحتياطي
      - اختبار الأمان والحماية

   ب. اختبار تجربة المستخدم:
      - اختبار سهولة الاستخدام
      - اختبار الأداء والسرعة
      - اختبار التوافق مع المتصفحات
      - اختبار الاستجابة للأخطاء

5. النشر والإطلاق:
   أ. إعداد البنية التحتية:
      - تجهيز الخوادم
      - إعداد النطاقات
      - تثبيت الشهادات الأمنية
      - إعداد النسخ الاحتياطي

   ب. إطلاق النظام:
      - نشر اللاندنج بيج
      - نشر نظام إدارة المبيعات
      - تجهيز ملفات التثبيت
      - تدريب فريق المبيعات والدعم

6. المتابعة والتحسين:
   - جمع تعليقات المستخدمين
   - تحليل الأداء والمشاكل
   - تحديث وتحسين النظام
   - إضافة مميزات جديدة 

## الأدوات والتقنيات المطلوبة للتنفيذ

1. تطوير اللاندنج بيج:
   أ. الأدوات المجانية:
      - Next.js للتطوير
      - Tailwind CSS للتصميم
      - React Icons للأيقونات
      - Formik للنماذج
      - Yup للتحقق من البيانات
      - React Query لإدارة حالة البيانات

   ب. الأدوات المدفوعة (اختيارية):
      - قالب جاهز من ThemeForest (100-60$)
      - خدمة Intercom للدردشة الحية (حسب الاستخدام)
      - صور عالية الجودة من Shutterstock (اشتراك شهري)

2. تطوير البرنامج الرئيسي:
   أ. الأدوات المجانية:
      - Electron.js لتطوير البرنامج
      - SQLite للتخزين المحلي
      - Node.js للخادم
      - Express.js للواجهة الخلفية
      - Socket.io للمزامنة المباشرة
      - JWT للتحقق من الهوية

   ب. الأدوات المدفوعة (ضرورية):
      - شهادة توقيع رقمي للبرنامج (200-300$ سنوياً)
      - خدمة MongoDB Atlas للتخزين السحابي (حسب الاستخدام)

3. البنية التحتية:
   أ. الخدمات المجانية:
      - GitHub للتحكم في الإصدارات
      - Vercel لنشر اللاندنج بيج
      - CloudFlare للحماية الأساسية
      - Let's Encrypt للشهادات الأمنية

   ب. الخدمات المدفوعة (ضرورية):
      - استضافة VPS للخادم (20-50$ شهرياً)
      - نطاق للموقع (10-15$ سنوياً)
      - خدمة SendGrid للبريد (حسب الاستخدام)

4. أدوات التطوير والاختبار:
   أ. الأدوات المجانية:
      - VS Code للتطوير
      - Postman لاختبار API
      - Chrome DevTools للتصحيح
      - Jest للاختبارات البرمجية
      - Cypress لاختبار الواجهات

   ب. الأدوات المدفوعة (اختيارية):
      - JetBrains WebStorm (149$ سنوياً)
      - BrowserStack لاختبار التوافق (حسب الاستخدام)

5. أدوات المراقبة والتحليل:
   أ. الأدوات المجانية:
      - Google Analytics للتحليلات
      - Sentry لتتبع الأخطاء
      - Uptime Robot لمراقبة الخدمة
      - Google Search Console لتحسين SEO

   ب. الأدوات المدفوعة (حسب الحاجة):
      - New Relic لمراقبة الأداء (حسب الاستخدام)
      - LogRocket لتحليل تجربة المستخدم (حسب الاستخدام)

التكلفة التقديرية الأولية:
1. التكاليف الضرورية:
   - شهادة توقيع رقمي: ~250$ سنوياً
   - استضافة VPS: ~35$ شهرياً
   - نطاق: ~15$ سنوياً
   - MongoDB Atlas: يبدأ من مجاني حتى ~57$ شهرياً
   إجمالي التكاليف الضرورية: ~700$ سنوياً

2. التكاليف الاختيارية:
   - قالب جاهز: ~80$ (مرة واحدة)
   - خدمة الدردشة الحية: ~50$ شهرياً
   - أدوات التطوير المتقدمة: ~200$ سنوياً
   إجمالي التكاليف الاختيارية: ~900$ سنوياً

ملاحظات:
- معظم الأدوات الأساسية مجانية ومفتوحة المصدر
- التكاليف المدفوعة الضرورية تتعلق بالبنية التحتية والأمان
- يمكن البدء بالحد الأدنى من التكاليف والتوسع حسب الحاجة
- بعض الخدمات تقدم خطط مجانية كافية للبداية 

## البدائل المجانية للأدوات المدفوعة

1. بدائل أدوات اللاندنج بيج:
   - بدل قالب ThemeForest:
     * قوالب Tailwind المجانية
     * قوالب Bootstrap المجانية
     * تصميم بسيط مخصص
   
   - بدل Intercom للدردشة:
     * Tawk.to (مجاني بالكامل)
     * Crisp (خطة مجانية)
     * Facebook Messenger (مجاني)
   
   - بدل Shutterstock:
     * Unsplash للصور المجانية
     * Pexels للصور والفيديوهات
     * Pixabay للصور التوضيحية

2. بدائل البرنامج الرئيسي:
   - بدل شهادة التوقيع الرقمي:
     * تحذير للمستخدم عند التثبيت (مؤقتاً)
     * استخدام Let's Encrypt للتشفير
   
   - بدل MongoDB Atlas المدفوع:
     * استخدام الخطة المجانية (512MB)
     * Firebase (خطة مجانية)
     * استخدام SQLite للتخزين المؤقت

3. بدائل البنية التحتية:
   - بدل VPS المدفوع:
     * Heroku (خطة مجانية)
     * Vercel (مجاني للمشاريع الصغيرة)
     * Netlify (مجاني للمواقع الثابتة)
   
   - بدل SendGrid:
     * Gmail API (مجاني حتى 500 رسالة يومياً)
     * Mailgun (خطة مجانية)
     * Amazon SES (مجاني للسنة الأولى)

4. بدائل أدوات التطوير:
   - بدل WebStorm:
     * VS Code (مجاني وممتاز)
     * Sublime Text (مجاني للتجربة)
   
   - بدل BrowserStack:
     * Chrome DevTools للتجاوب
     * Firefox Developer Tools
     * اختبار يدوي على متصفحات مختلفة

5. بدائل المراقبة والتحليل:
   - بدل New Relic:
     * Grafana (مفتوح المصدر)
     * Prometheus (مفتوح المصدر)
   
   - بدل LogRocket:
     * Sentry (خطة مجانية)
     * Google Analytics (مجاني)

ملاحظات مهمة للبدء بالحد الأدنى من التكاليف:
1. البداية بالضروريات فقط:
   - استضافة مجانية على Vercel/Heroku
   - قاعدة بيانات MongoDB Atlas مجانية
   - شهادات SSL مجانية من Let's Encrypt
   - أدوات تطوير واختبار مجانية

2. الترقية التدريجية:
   - البدء بالخطط المجانية
   - الترقية حسب نمو المشروع
   - إضافة الخدمات المدفوعة عند الحاجة
   - الاستثمار في الأمان أولاً

3. التكاليف الضرورية التي لا يمكن تجنبها:
   - نطاق للموقع (~15$ سنوياً)
   - شهادة توقيع رقمي (يمكن تأجيلها للبداية)

4. التكاليف الاختيارية التي يمكن تجنبها:
   - قالب جاهز: ~80$ (مرة واحدة)
   - خدمة الدردشة الحية: ~50$ شهرياً
   - أدوات التطوير المتقدمة: ~200$ سنوياً
   إجمالي التكاليف الاختيارية: ~900$ سنوياً

ملاحظات:
- معظم الأدوات الأساسية مجانية ومفتوحة المصدر
- التكاليف المدفوعة الضرورية تتعلق بالبنية التحتية والأمان
- يمكن البدء بالحد الأدنى من التكاليف والتوسع حسب الحاجة
- بعض الخدمات تقدم خطط مجانية كافية للبداية 

## خيارات النطاق والإيميلات

1. شراء النطاق:
   أ. أرخص الخيارات:
      - Namecheap:
        * نطاق .com: ~8.98$ سنوياً
        * نطاق .net: ~9.98$ سنوياً
        * نطاق .org: ~9.98$ سنوياً
        * حماية Whois Privacy مجانية
      
      - Porkbun:
        * نطاق .com: ~8.84$ سنوياً
        * نطاق .net: ~9.13$ سنوياً
        * حماية Whois Privacy مجانية
        * SSL مجاني

2. خدمة الإيميلات:
   أ. الخيار الأول (الأرخص):
      - Zoho Mail:
        * الخطة المجانية: 5 مستخدمين، 5GB لكل مستخدم
        * خطة Mail Lite: 1$ شهرياً/مستخدم (10GB)
        * يدعم البريد على النطاق الخاص
        * يدعم العربية
   
   ب. الخيار الثاني:
      - Google Workspace:
        * خطة Business Starter: 6$ شهرياً/مستخدم
        * 30GB تخزين لكل مستخدم
        * جميع خدمات جوجل
        * دعم فني 24/7

التكلفة السنوية المتوقعة:
1. الحد الأدنى:
   - نطاق من Namecheap: ~9$ سنوياً
   - Zoho Mail مجاني: 0$ سنوياً
   إجمالي: ~9$ سنوياً

2. الخيار المتوسط:
   - نطاق من Namecheap: ~9$ سنوياً
   - Zoho Mail Lite (لمستخدمين): 24$ سنوياً
   إجمالي: ~33$ سنوياً

ملاحظات:
- يمكن البدء بالخطة المجانية من Zoho Mail
- الترقية لخطة مدفوعة عند الحاجة
- النطاق يجب تجديده سنوياً للحفاظ عليه
- معظم مزودي النطاقات يقدمون خصومات للسنة الأولى 